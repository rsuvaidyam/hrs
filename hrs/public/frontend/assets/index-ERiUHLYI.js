const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-DEyJMTFB.js","assets/frappe-ui-BW2N2VeT.js","assets/frappe-ui-Df7gnFEn.css"])))=>i.map(i=>d[i]);
var J=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var K=(S,k)=>{var d={};for(var h in S)et.call(S,h)&&k.indexOf(h)<0&&(d[h]=S[h]);if(S!=null&&J)for(var h of J(S))k.indexOf(h)<0&&rt.call(S,h)&&(d[h]=S[h]);return d};var nt=(S,k)=>()=>(k||S((k={exports:{}}).exports,k),k.exports);var L=(S,k,d)=>new Promise((h,n)=>{var t=u=>{try{s(d.next(u))}catch(p){n(p)}},a=u=>{try{s(d.throw(u))}catch(p){n(p)}},s=u=>u.done?h(u.value):Promise.resolve(u.value).then(t,a);s((d=d.apply(S,k)).next())});import{_ as Y,o as z,c as F,a as ot,b as it,r as st,d as G,e as at,f as ct,g as ht,h as M,i as ut,j as pt,k as ft,l as lt}from"./frappe-ui-BW2N2VeT.js";var jt=nt(tt=>{(function(){const k=document.createElement("link").relList;if(k&&k.supports&&k.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&h(a)}).observe(document,{childList:!0,subtree:!0});function d(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function h(n){if(n.ep)return;n.ep=!0;const t=d(n);fetch(n.href,t)}})();const dt={inject:["$auth"]};function yt(S,k,d,h,n,t){const a=st("router-view");return z(),F("div",null,[t.$auth.isLoggedIn?(z(),F("button",{key:0,onClick:k[0]||(k[0]=s=>t.$auth.logout())},"Logout")):ot("",!0),it(a)])}const mt=Y(dt,[["render",yt]]),gt={resources:{ping(){return{method:"frappe.ping",onSuccess(S){alert(S)}}}}},vt=G("h1",null,"Home Page",-1);function bt(S,k,d,h,n,t){return z(),F("div",null,[vt,G("button",{class:"bg-blue-500",onClick:k[0]||(k[0]=a=>S.$resources.ping.fetch())},"Ping")])}const wt=Y(gt,[["render",bt]]),kt=[{path:"/login",name:"Login",component:()=>at(()=>import("./Login-DEyJMTFB.js"),__vite__mapDeps([0,1,2])),meta:{isLoginPage:!0},props:!0}],xt=[{path:"/",name:"Home",component:wt},...kt],H=ct({history:ht("/hrs"),routes:xt});function $(S,k){return L(this,null,function*(){k||(k={});let d={Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Frappe-Site-Name":window.location.hostname};window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&(d["X-Frappe-CSRF-Token"]=window.csrf_token),n(this,"RequestStarted",null);const h=yield fetch(`/api/method/${S}`,{method:"POST",headers:d,body:JSON.stringify(k)});if(h.ok){n(this,null,null);const t=yield h.json();return t.docs||S==="login"?t:t.message}else{let t=yield h.text(),a,s;try{a=JSON.parse(t)}catch(y){}let u=[[S,a.exc_type,a._error_message].filter(Boolean).join(" ")];if(a.exc){s=a.exc;try{s=JSON.parse(s)[0]}catch(y){}u.push(s)}let p=new Error(u.join(`
`));throw p.exc_type=a.exc_type,p.exc=s,p.messages=a._server_messages?JSON.parse(a._server_messages):[],p.messages=p.messages.concat(a.message),p.messages=p.messages.map(y=>{try{return JSON.parse(y).message}catch(g){return y}}),p.messages=p.messages.filter(Boolean),p.messages.length||(p.messages=a._error_message?[a._error_message]:["Internal Server Error"]),n(this,null,p.messages.join(`
`)),[401,403].includes(h.status)&&H.currentRoute.name!=="Login"&&H.push("/login"),p}function n(t,a,s){(t==null?void 0:t.state)!==void 0&&(t.state=a),(t==null?void 0:t.errorMessage)!==void 0&&(t.errorMessage=s)}})}class Bt{constructor(k,d){this._vm=k,this._watchers=[];let h=M({});for(let n in d){let t=d[n];if(typeof t=="function")this._watchers.push([()=>t.call(k),(a,s)=>this.updateResource(n,a,s),{immediate:!0,deep:!0,flush:"sync"}]);else{let a=new V(k,t);h[n]=ut(a),a.auto&&a.reload()}}this.resources=h}init(){this._watchers=this._watchers.map(k=>this._vm.$watch(...k))}destroy(){const k=this._vm;delete k._rm}updateResource(k,d,h){let n;k in this.resources?n=this.resources[k]:(n=M(new V(this._vm,d)),this.resources[k]=n);let t=n.data;h&&n&&n.cancel(),n.update(d),n.keepData&&(n.data=t),n.auto&&n.reload()}}class V{constructor(k,d={}){if(typeof d=="string"&&(d={method:d,auto:!0}),!d.method)throw new Error("[Resource Manager]: method is required to define a resource");this._vm=k,this.method=d.method,this.delay=d.delay||0,this.update(d)}update(k){if(typeof k=="string"&&(k={method:k,auto:!0}),this.method&&k.method&&k.method!==this.method)throw new Error("[Resource Manager]: method cannot change for the same resource");this.options=k,this.params=k.params||null,this.auto=k.auto||!1,this.keepData=k.keepData||!1,this.condition=k.condition||(()=>!0),this.paged=k.paged||!1,this.validate=k.validate||null,this.validate&&(this.validate=this.validate.bind(this._vm)),this.listeners=Object.create(null),this.onceListeners=Object.create(null);let d=Object.keys(k).filter(h=>h.startsWith("on"));if(d.length>0)for(const h of d)this.on(h,k[h]);this.reset()}fetch(k){return L(this,null,function*(){if(this.condition()){if(this.loading=!0,this.currentParams=k||this.params,this.validate){let d=yield this.validate();if(d){this.setError(d),this.loading=!1;return}}try{let d=yield $(this.method,this.currentParams);this.delay&&(yield new Promise(h=>setTimeout(h,this.delay*1e3))),Array.isArray(d)&&this.paged?(this.lastPageEmpty=d.length===0,this.data=[].concat(this.data||[],d)):this.data=d,this.emit("Success",this.data)}catch(d){let h=d.messages||["Internal Server Error"];this.setError(h.join(`
`))}this.lastLoaded=new Date,this.loading=!1,this.currentParams=null}})}reload(){return this.fetch()}submit(k){return this.fetch(k)}reset(){this.data=this.options.default||null,this.error=null,this.loading=!1,this.lastLoaded=null,this.lastPageEmpty=!1,this.currentParams=null}cancel(){}setError(k){this.error=k,this.emit("Error",this.error)}on(k,d){return this.listeners[k]=(this.listeners[k]||[]).concat(d),this}once(k,d){return this.onceListeners[k]=(this.onceListeners[k]||[]).concat(d),this}emit(k,...d){let h="on"+k,n=this._vm;(this.listeners[h]||[]).forEach(a=>{t(a)}),(this.onceListeners[h]||[]).forEach(a=>{t(a),this.onceListeners[h].splice(this.onceListeners[h].indexOf(a),1)});function t(a){try{a.call(n,...d)}catch(s){console.error(s)}}}}let At={beforeCreate(){const S=this.$options;if(!S.resources||S._rm)return;let k;if(typeof S.resources=="function"&&(S.resources=S.resources.call(this)),_t(S.resources)){const d=S.resources,{$options:h}=d,n=K(d,["$options"]);k=new Bt(this,n)}else throw new Error("[ResourceManager]: resources options should be an object or a function that returns object");Object.prototype.hasOwnProperty.call(this,"$resources")||(this.$resources=M(k.resources)),Object.keys(S.resources).forEach(h=>{X(S.computed,h)||X(S.props,h)||X(S.methods,h)||(S.computed||(S.computed={}),S.computed[h]=S.resources[h])}),this._rm=k},data(){return this._rm?{$rm:this._rm,$r:this._rm.resources,$resources:this._rm.resources}:{}},created(){this._rm&&this._rm.init()}};function St(S){S.mixin(At)}function _t(S){return typeof S=="object"&&S&&Object.prototype.toString(S)==="[object Object]"}function X(S,k){return k in(S||{})}var Q={exports:{}};/*!
 * Socket.IO v2.5.0
 * (c) 2014-2021 Guillermo Rauch
 * Released under the MIT License.
 */(function(S,k){(function(d,h){S.exports=h()})(pt,function(){return function(d){function h(t){if(n[t])return n[t].exports;var a=n[t]={exports:{},id:t,loaded:!1};return d[t].call(a.exports,a,a.exports,h),a.loaded=!0,a.exports}var n={};return h.m=d,h.c=n,h.p="",h(0)}([function(d,h,n){function t(g,f){(typeof g=="undefined"?"undefined":a(g))==="object"&&(f=g,g=void 0),f=f||{};var o,i=s(g),r=i.source,e=i.id,c=i.path,m=y[e]&&c in y[e].nsps,l=f.forceNew||f["force new connection"]||f.multiplex===!1||m;return l?o=p(r,f):(y[e]||(y[e]=p(r,f)),o=y[e]),i.query&&!f.query&&(f.query=i.query),o.socket(i.path,f)}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s=n(1),u=n(4),p=n(9);n(3)("socket.io-client"),d.exports=h=t;var y=h.managers={};h.protocol=u.protocol,h.connect=t,h.Manager=n(9),h.Socket=n(34)},function(d,h,n){function t(s,u){var p=s;u=u||typeof location!="undefined"&&location,s==null&&(s=u.protocol+"//"+u.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s=s.charAt(1)==="/"?u.protocol+s:u.host+s),/^(https?|wss?):\/\//.test(s)||(s=typeof u!="undefined"?u.protocol+"//"+s:"https://"+s),p=a(s)),p.port||(/^(http|ws)$/.test(p.protocol)?p.port="80":/^(http|ws)s$/.test(p.protocol)&&(p.port="443")),p.path=p.path||"/";var y=p.host.indexOf(":")!==-1,g=y?"["+p.host+"]":p.host;return p.id=p.protocol+"://"+g+":"+p.port,p.href=p.protocol+"://"+g+(u&&u.port===p.port?"":":"+p.port),p}var a=n(2);n(3)("socket.io-client:url"),d.exports=t},function(d,h){function n(u,p){var y=/\/{2,9}/g,g=p.replace(y,"/").split("/");return p.substr(0,1)!="/"&&p.length!==0||g.splice(0,1),p.substr(p.length-1,1)=="/"&&g.splice(g.length-1,1),g}function t(u,p){var y={};return p.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(g,f,o){f&&(y[f]=o)}),y}var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];d.exports=function(u){var p=u,y=u.indexOf("["),g=u.indexOf("]");y!=-1&&g!=-1&&(u=u.substring(0,y)+u.substring(y,g).replace(/:/g,";")+u.substring(g,u.length));for(var f=a.exec(u||""),o={},i=14;i--;)o[s[i]]=f[i]||"";return y!=-1&&g!=-1&&(o.source=p,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=n(o,o.path),o.queryKey=t(o,o.query),o}},function(d,h){d.exports=function(){return function(){}}},function(d,h,n){function t(){}function a(l){var b=""+l.type;if(h.BINARY_EVENT!==l.type&&h.BINARY_ACK!==l.type||(b+=l.attachments+"-"),l.nsp&&l.nsp!=="/"&&(b+=l.nsp+","),l.id!=null&&(b+=l.id),l.data!=null){var w=s(l.data);if(w===!1)return m;b+=w}return b}function s(l){try{return JSON.stringify(l)}catch(b){return!1}}function u(l,b){function w(B){var E=r.deconstructPacket(B),v=a(E.packet),x=E.buffers;x.unshift(v),b(x)}r.removeBlobs(l,w)}function p(){this.reconstructor=null}function y(l){var b=0,w={type:Number(l.charAt(0))};if(h.types[w.type]==null)return o("unknown packet type "+w.type);if(h.BINARY_EVENT===w.type||h.BINARY_ACK===w.type){for(var B="";l.charAt(++b)!=="-"&&(B+=l.charAt(b),b!=l.length););if(B!=Number(B)||l.charAt(b)!=="-")throw new Error("Illegal attachments");w.attachments=Number(B)}if(l.charAt(b+1)==="/")for(w.nsp="";++b;){var E=l.charAt(b);if(E===","||(w.nsp+=E,b===l.length))break}else w.nsp="/";var v=l.charAt(b+1);if(v!==""&&Number(v)==v){for(w.id="";++b;){var E=l.charAt(b);if(E==null||Number(E)!=E){--b;break}if(w.id+=l.charAt(b),b===l.length)break}w.id=Number(w.id)}if(l.charAt(++b)){var x=g(l.substr(b)),A=x!==!1&&(w.type===h.ERROR||e(x));if(!A)return o("invalid payload");w.data=x}return w}function g(l){try{return JSON.parse(l)}catch(b){return!1}}function f(l){this.reconPack=l,this.buffers=[]}function o(l){return{type:h.ERROR,data:"parser error: "+l}}var i=(n(3)("socket.io-parser"),n(5)),r=n(6),e=n(7),c=n(8);h.protocol=4,h.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],h.CONNECT=0,h.DISCONNECT=1,h.EVENT=2,h.ACK=3,h.ERROR=4,h.BINARY_EVENT=5,h.BINARY_ACK=6,h.Encoder=t,h.Decoder=p;var m=h.ERROR+'"encode error"';t.prototype.encode=function(l,b){if(h.BINARY_EVENT===l.type||h.BINARY_ACK===l.type)u(l,b);else{var w=a(l);b([w])}},i(p.prototype),p.prototype.add=function(l){var b;if(typeof l=="string")b=y(l),h.BINARY_EVENT===b.type||h.BINARY_ACK===b.type?(this.reconstructor=new f(b),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!c(l)&&!l.base64)throw new Error("Unknown type: "+l);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");b=this.reconstructor.takeBinaryData(l),b&&(this.reconstructor=null,this.emit("decoded",b))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(l){if(this.buffers.push(l),this.buffers.length===this.reconPack.attachments){var b=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(d,h,n){function t(s){if(s)return a(s)}function a(s){for(var u in t.prototype)s[u]=t.prototype[u];return s}d.exports=t,t.prototype.on=t.prototype.addEventListener=function(s,u){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(u),this},t.prototype.once=function(s,u){function p(){this.off(s,p),u.apply(this,arguments)}return p.fn=u,this.on(s,p),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(s,u){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var p=this._callbacks["$"+s];if(!p)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var y,g=0;g<p.length;g++)if(y=p[g],y===u||y.fn===u){p.splice(g,1);break}return p.length===0&&delete this._callbacks["$"+s],this},t.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var u=new Array(arguments.length-1),p=this._callbacks["$"+s],y=1;y<arguments.length;y++)u[y-1]=arguments[y];if(p){p=p.slice(0);for(var y=0,g=p.length;y<g;++y)p[y].apply(this,u)}return this},t.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]},t.prototype.hasListeners=function(s){return!!this.listeners(s).length}},function(d,h,n){function t(f,o){if(!f)return f;if(u(f)){var i={_placeholder:!0,num:o.length};return o.push(f),i}if(s(f)){for(var r=new Array(f.length),e=0;e<f.length;e++)r[e]=t(f[e],o);return r}if(typeof f=="object"&&!(f instanceof Date)){var r={};for(var c in f)r[c]=t(f[c],o);return r}return f}function a(f,o){if(!f)return f;if(f&&f._placeholder)return o[f.num];if(s(f))for(var i=0;i<f.length;i++)f[i]=a(f[i],o);else if(typeof f=="object")for(var r in f)f[r]=a(f[r],o);return f}var s=n(7),u=n(8),p=Object.prototype.toString,y=typeof Blob=="function"||typeof Blob!="undefined"&&p.call(Blob)==="[object BlobConstructor]",g=typeof File=="function"||typeof File!="undefined"&&p.call(File)==="[object FileConstructor]";h.deconstructPacket=function(f){var o=[],i=f.data,r=f;return r.data=t(i,o),r.attachments=o.length,{packet:r,buffers:o}},h.reconstructPacket=function(f,o){return f.data=a(f.data,o),f.attachments=void 0,f},h.removeBlobs=function(f,o){function i(c,m,l){if(!c)return c;if(y&&c instanceof Blob||g&&c instanceof File){r++;var b=new FileReader;b.onload=function(){l?l[m]=this.result:e=this.result,--r||o(e)},b.readAsArrayBuffer(c)}else if(s(c))for(var w=0;w<c.length;w++)i(c[w],w,c);else if(typeof c=="object"&&!u(c))for(var B in c)i(c[B],B,c)}var r=0,e=f;i(e),r||o(e)}},function(d,h){var n={}.toString;d.exports=Array.isArray||function(t){return n.call(t)=="[object Array]"}},function(d,h){function n(u){return t&&Buffer.isBuffer(u)||a&&(u instanceof ArrayBuffer||s(u))}d.exports=n;var t=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",a=typeof ArrayBuffer=="function",s=function(u){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(u):u.buffer instanceof ArrayBuffer}},function(d,h,n){function t(e,c){if(!(this instanceof t))return new t(e,c);e&&(typeof e=="undefined"?"undefined":a(e))==="object"&&(c=e,e=void 0),c=c||{},c.path=c.path||"/socket.io",this.nsps={},this.subs=[],this.opts=c,this.reconnection(c.reconnection!==!1),this.reconnectionAttempts(c.reconnectionAttempts||1/0),this.reconnectionDelay(c.reconnectionDelay||1e3),this.reconnectionDelayMax(c.reconnectionDelayMax||5e3),this.randomizationFactor(c.randomizationFactor||.5),this.backoff=new i({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(c.timeout==null?2e4:c.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var m=c.parser||y;this.encoder=new m.Encoder,this.decoder=new m.Decoder,this.autoConnect=c.autoConnect!==!1,this.autoConnect&&this.open()}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(10),u=n(34),p=n(5),y=n(4),g=n(36),f=n(37),o=(n(3)("socket.io-client:manager"),n(33)),i=n(38),r=Object.prototype.hasOwnProperty;d.exports=t,t.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)r.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},t.prototype.updateSocketIds=function(){for(var e in this.nsps)r.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},t.prototype.generateId=function(e){return(e==="/"?"":e+"#")+this.engine.id},p(t.prototype),t.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},t.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},t.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},t.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},t.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},t.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},t.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},t.prototype.open=t.prototype.connect=function(e,c){if(~this.readyState.indexOf("open"))return this;this.engine=s(this.uri,this.opts);var m=this.engine,l=this;this.readyState="opening",this.skipReconnect=!1;var b=g(m,"open",function(){l.onopen(),e&&e()}),w=g(m,"error",function(v){if(l.cleanup(),l.readyState="closed",l.emitAll("connect_error",v),e){var x=new Error("Connection error");x.data=v,e(x)}else l.maybeReconnectOnOpen()});if(this._timeout!==!1){var B=this._timeout;B===0&&b.destroy();var E=setTimeout(function(){b.destroy(),m.close(),m.emit("error","timeout"),l.emitAll("connect_timeout",B)},B);this.subs.push({destroy:function(){clearTimeout(E)}})}return this.subs.push(b),this.subs.push(w),this},t.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(g(e,"data",f(this,"ondata"))),this.subs.push(g(e,"ping",f(this,"onping"))),this.subs.push(g(e,"pong",f(this,"onpong"))),this.subs.push(g(e,"error",f(this,"onerror"))),this.subs.push(g(e,"close",f(this,"onclose"))),this.subs.push(g(this.decoder,"decoded",f(this,"ondecoded")))},t.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},t.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},t.prototype.ondata=function(e){this.decoder.add(e)},t.prototype.ondecoded=function(e){this.emit("packet",e)},t.prototype.onerror=function(e){this.emitAll("error",e)},t.prototype.socket=function(e,c){function m(){~o(b.connecting,l)||b.connecting.push(l)}var l=this.nsps[e];if(!l){l=new u(this,e,c),this.nsps[e]=l;var b=this;l.on("connecting",m),l.on("connect",function(){l.id=b.generateId(e)}),this.autoConnect&&m()}return l},t.prototype.destroy=function(e){var c=o(this.connecting,e);~c&&this.connecting.splice(c,1),this.connecting.length||this.close()},t.prototype.packet=function(e){var c=this;e.query&&e.type===0&&(e.nsp+="?"+e.query),c.encoding?c.packetBuffer.push(e):(c.encoding=!0,this.encoder.encode(e,function(m){for(var l=0;l<m.length;l++)c.engine.write(m[l],e.options);c.encoding=!1,c.processPacketQueue()}))},t.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},t.prototype.cleanup=function(){for(var e=this.subs.length,c=0;c<e;c++){var m=this.subs.shift();m.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},t.prototype.close=t.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},t.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},t.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var c=this.backoff.duration();this.reconnecting=!0;var m=setTimeout(function(){e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(l){l?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",l.data)):e.onreconnect()}))},c);this.subs.push({destroy:function(){clearTimeout(m)}})}},t.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(d,h,n){d.exports=n(11),d.exports.parser=n(19)},function(d,h,n){function t(o,i){return this instanceof t?(i=i||{},o&&typeof o=="object"&&(i=o,o=null),o?(o=g(o),i.hostname=o.host,i.secure=o.protocol==="https"||o.protocol==="wss",i.port=o.port,o.query&&(i.query=o.query)):i.host&&(i.hostname=g(i.host).host),this.secure=i.secure!=null?i.secure:typeof location!="undefined"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.agent=i.agent||!1,this.hostname=i.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=i.port||(typeof location!="undefined"&&location.port?location.port:this.secure?443:80),this.query=i.query||{},typeof this.query=="string"&&(this.query=f.decode(this.query)),this.upgrade=i.upgrade!==!1,this.path=(i.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!i.forceJSONP,this.jsonp=i.jsonp!==!1,this.forceBase64=!!i.forceBase64,this.enablesXDR=!!i.enablesXDR,this.withCredentials=i.withCredentials!==!1,this.timestampParam=i.timestampParam||"t",this.timestampRequests=i.timestampRequests,this.transports=i.transports||["polling","websocket"],this.transportOptions=i.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=i.policyPort||843,this.rememberUpgrade=i.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=i.onlyBinaryUpgrades,this.perMessageDeflate=i.perMessageDeflate!==!1&&(i.perMessageDeflate||{}),this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=i.pfx||null,this.key=i.key||null,this.passphrase=i.passphrase||null,this.cert=i.cert||null,this.ca=i.ca||null,this.ciphers=i.ciphers||null,this.rejectUnauthorized=i.rejectUnauthorized===void 0||i.rejectUnauthorized,this.forceNode=!!i.forceNode,this.isReactNative=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self=="undefined"||this.isReactNative)&&(i.extraHeaders&&Object.keys(i.extraHeaders).length>0&&(this.extraHeaders=i.extraHeaders),i.localAddress&&(this.localAddress=i.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new t(o,i)}function a(o){var i={};for(var r in o)o.hasOwnProperty(r)&&(i[r]=o[r]);return i}var s=n(12),u=n(5),p=(n(3)("engine.io-client:socket"),n(33)),y=n(19),g=n(2),f=n(27);d.exports=t,t.priorWebsocketSuccess=!1,u(t.prototype),t.protocol=y.protocol,t.Socket=t,t.Transport=n(18),t.transports=n(12),t.parser=n(19),t.prototype.createTransport=function(o){var i=a(this.query);i.EIO=y.protocol,i.transport=o;var r=this.transportOptions[o]||{};this.id&&(i.sid=this.id);var e=new s[o]({query:i,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative});return e},t.prototype.open=function(){var o;if(this.rememberUpgrade&&t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)o="websocket";else{if(this.transports.length===0){var i=this;return void setTimeout(function(){i.emit("error","No transports available")},0)}o=this.transports[0]}this.readyState="opening";try{o=this.createTransport(o)}catch(r){return this.transports.shift(),void this.open()}o.open(),this.setTransport(o)},t.prototype.setTransport=function(o){var i=this;this.transport&&this.transport.removeAllListeners(),this.transport=o,o.on("drain",function(){i.onDrain()}).on("packet",function(r){i.onPacket(r)}).on("error",function(r){i.onError(r)}).on("close",function(){i.onClose("transport close")})},t.prototype.probe=function(o){function i(){if(E.onlyBinaryUpgrades){var v=!this.supportsBinary&&E.transport.supportsBinary;B=B||v}B||(w.send([{type:"ping",data:"probe"}]),w.once("packet",function(x){if(!B)if(x.type==="pong"&&x.data==="probe"){if(E.upgrading=!0,E.emit("upgrading",w),!w)return;t.priorWebsocketSuccess=w.name==="websocket",E.transport.pause(function(){B||E.readyState!=="closed"&&(b(),E.setTransport(w),w.send([{type:"upgrade"}]),E.emit("upgrade",w),w=null,E.upgrading=!1,E.flush())})}else{var A=new Error("probe error");A.transport=w.name,E.emit("upgradeError",A)}}))}function r(){B||(B=!0,b(),w.close(),w=null)}function e(v){var x=new Error("probe error: "+v);x.transport=w.name,r(),E.emit("upgradeError",x)}function c(){e("transport closed")}function m(){e("socket closed")}function l(v){w&&v.name!==w.name&&r()}function b(){w.removeListener("open",i),w.removeListener("error",e),w.removeListener("close",c),E.removeListener("close",m),E.removeListener("upgrading",l)}var w=this.createTransport(o,{probe:1}),B=!1,E=this;t.priorWebsocketSuccess=!1,w.once("open",i),w.once("error",e),w.once("close",c),this.once("close",m),this.once("upgrading",l),w.open()},t.prototype.onOpen=function(){if(this.readyState="open",t.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause)for(var o=0,i=this.upgrades.length;o<i;o++)this.probe(this.upgrades[o])},t.prototype.onPacket=function(o){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emit("packet",o),this.emit("heartbeat"),o.type){case"open":this.onHandshake(JSON.parse(o.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var i=new Error("server error");i.code=o.data,this.onError(i);break;case"message":this.emit("data",o.data),this.emit("message",o.data)}},t.prototype.onHandshake=function(o){this.emit("handshake",o),this.id=o.sid,this.transport.query.sid=o.sid,this.upgrades=this.filterUpgrades(o.upgrades),this.pingInterval=o.pingInterval,this.pingTimeout=o.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},t.prototype.onHeartbeat=function(o){clearTimeout(this.pingTimeoutTimer);var i=this;i.pingTimeoutTimer=setTimeout(function(){i.readyState!=="closed"&&i.onClose("ping timeout")},o||i.pingInterval+i.pingTimeout)},t.prototype.setPing=function(){var o=this;clearTimeout(o.pingIntervalTimer),o.pingIntervalTimer=setTimeout(function(){o.ping(),o.onHeartbeat(o.pingTimeout)},o.pingInterval)},t.prototype.ping=function(){var o=this;this.sendPacket("ping",function(){o.emit("ping")})},t.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()},t.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},t.prototype.write=t.prototype.send=function(o,i,r){return this.sendPacket("message",o,i,r),this},t.prototype.sendPacket=function(o,i,r,e){if(typeof i=="function"&&(e=i,i=void 0),typeof r=="function"&&(e=r,r=null),this.readyState!=="closing"&&this.readyState!=="closed"){r=r||{},r.compress=r.compress!==!1;var c={type:o,data:i,options:r};this.emit("packetCreate",c),this.writeBuffer.push(c),e&&this.once("flush",e),this.flush()}},t.prototype.close=function(){function o(){e.onClose("forced close"),e.transport.close()}function i(){e.removeListener("upgrade",i),e.removeListener("upgradeError",i),o()}function r(){e.once("upgrade",i),e.once("upgradeError",i)}if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():o()}):this.upgrading?r():o()}return this},t.prototype.onError=function(o){t.priorWebsocketSuccess=!1,this.emit("error",o),this.onClose("transport error",o)},t.prototype.onClose=function(o,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",o,i),r.writeBuffer=[],r.prevBufferLen=0}},t.prototype.filterUpgrades=function(o){for(var i=[],r=0,e=o.length;r<e;r++)~p(this.transports,o[r])&&i.push(o[r]);return i}},function(d,h,n){function t(y){var g,f=!1,o=!1,i=y.jsonp!==!1;if(typeof location!="undefined"){var r=location.protocol==="https:",e=location.port;e||(e=r?443:80),f=y.hostname!==location.hostname||e!==y.port,o=y.secure!==r}if(y.xdomain=f,y.xscheme=o,g=new a(y),"open"in g&&!y.forceJSONP)return new s(y);if(!i)throw new Error("JSONP disabled");return new u(y)}var a=n(13),s=n(16),u=n(30),p=n(31);h.polling=t,h.websocket=p},function(d,h,n){var t=n(14),a=n(15);d.exports=function(s){var u=s.xdomain,p=s.xscheme,y=s.enablesXDR;try{if(typeof XMLHttpRequest!="undefined"&&(!u||t))return new XMLHttpRequest}catch(g){}try{if(typeof XDomainRequest!="undefined"&&!p&&y)return new XDomainRequest}catch(g){}if(!u)try{return new a[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(g){}}},function(d,h){try{d.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(n){d.exports=!1}},function(d,h){d.exports=function(){return typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")()}()},function(d,h,n){function t(){}function a(r){if(y.call(this,r),this.requestTimeout=r.requestTimeout,this.extraHeaders=r.extraHeaders,typeof location!="undefined"){var e=location.protocol==="https:",c=location.port;c||(c=e?443:80),this.xd=typeof location!="undefined"&&r.hostname!==location.hostname||c!==r.port,this.xs=r.secure!==e}}function s(r){this.method=r.method||"GET",this.uri=r.uri,this.xd=!!r.xd,this.xs=!!r.xs,this.async=r.async!==!1,this.data=r.data!==void 0?r.data:null,this.agent=r.agent,this.isBinary=r.isBinary,this.supportsBinary=r.supportsBinary,this.enablesXDR=r.enablesXDR,this.withCredentials=r.withCredentials,this.requestTimeout=r.requestTimeout,this.pfx=r.pfx,this.key=r.key,this.passphrase=r.passphrase,this.cert=r.cert,this.ca=r.ca,this.ciphers=r.ciphers,this.rejectUnauthorized=r.rejectUnauthorized,this.extraHeaders=r.extraHeaders,this.create()}function u(){for(var r in s.requests)s.requests.hasOwnProperty(r)&&s.requests[r].abort()}var p=n(13),y=n(17),g=n(5),f=n(28),o=(n(3)("engine.io-client:polling-xhr"),n(15));if(d.exports=a,d.exports.Request=s,f(a,y),a.prototype.supportsBinary=!0,a.prototype.request=function(r){return r=r||{},r.uri=this.uri(),r.xd=this.xd,r.xs=this.xs,r.agent=this.agent||!1,r.supportsBinary=this.supportsBinary,r.enablesXDR=this.enablesXDR,r.withCredentials=this.withCredentials,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,r.requestTimeout=this.requestTimeout,r.extraHeaders=this.extraHeaders,new s(r)},a.prototype.doWrite=function(r,e){var c=typeof r!="string"&&r!==void 0,m=this.request({method:"POST",data:r,isBinary:c}),l=this;m.on("success",e),m.on("error",function(b){l.onError("xhr post error",b)}),this.sendXhr=m},a.prototype.doPoll=function(){var r=this.request(),e=this;r.on("data",function(c){e.onData(c)}),r.on("error",function(c){e.onError("xhr poll error",c)}),this.pollXhr=r},g(s.prototype),s.prototype.create=function(){var r={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new p(r),c=this;try{e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var m in this.extraHeaders)this.extraHeaders.hasOwnProperty(m)&&e.setRequestHeader(m,this.extraHeaders[m])}}catch(l){}if(this.method==="POST")try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(l){}try{e.setRequestHeader("Accept","*/*")}catch(l){}"withCredentials"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){c.onLoad()},e.onerror=function(){c.onError(e.responseText)}):e.onreadystatechange=function(){if(e.readyState===2)try{var l=e.getResponseHeader("Content-Type");(c.supportsBinary&&l==="application/octet-stream"||l==="application/octet-stream; charset=UTF-8")&&(e.responseType="arraybuffer")}catch(b){}e.readyState===4&&(e.status===200||e.status===1223?c.onLoad():setTimeout(function(){c.onError(typeof e.status=="number"?e.status:0)},0))},e.send(this.data)}catch(l){return void setTimeout(function(){c.onError(l)},0)}typeof document!="undefined"&&(this.index=s.requestsCount++,s.requests[this.index]=this)},s.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},s.prototype.onData=function(r){this.emit("data",r),this.onSuccess()},s.prototype.onError=function(r){this.emit("error",r),this.cleanup(!0)},s.prototype.cleanup=function(r){if(typeof this.xhr!="undefined"&&this.xhr!==null){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=t:this.xhr.onreadystatechange=t,r)try{this.xhr.abort()}catch(e){}typeof document!="undefined"&&delete s.requests[this.index],this.xhr=null}},s.prototype.onLoad=function(){var r;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(c){}r=e==="application/octet-stream"||e==="application/octet-stream; charset=UTF-8"?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(c){this.onError(c)}r!=null&&this.onData(r)},s.prototype.hasXDR=function(){return typeof XDomainRequest!="undefined"&&!this.xs&&this.enablesXDR},s.prototype.abort=function(){this.cleanup()},s.requestsCount=0,s.requests={},typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",u);else if(typeof addEventListener=="function"){var i="onpagehide"in o?"pagehide":"unload";addEventListener(i,u,!1)}}},function(d,h,n){function t(f){var o=f&&f.forceBase64;g&&!o||(this.supportsBinary=!1),a.call(this,f)}var a=n(18),s=n(27),u=n(19),p=n(28),y=n(29);n(3)("engine.io-client:polling"),d.exports=t;var g=function(){var f=n(13),o=new f({xdomain:!1});return o.responseType!=null}();p(t,a),t.prototype.name="polling",t.prototype.doOpen=function(){this.poll()},t.prototype.pause=function(f){function o(){i.readyState="paused",f()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||o()})),this.writable||(r++,this.once("drain",function(){--r||o()}))}else o()},t.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},t.prototype.onData=function(f){var o=this,i=function(r,e,c){return o.readyState==="opening"&&r.type==="open"&&o.onOpen(),r.type==="close"?(o.onClose(),!1):void o.onPacket(r)};u.decodePayload(f,this.socket.binaryType,i),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())},t.prototype.doClose=function(){function f(){o.write([{type:"close"}])}var o=this;this.readyState==="open"?f():this.once("open",f)},t.prototype.write=function(f){var o=this;this.writable=!1;var i=function(){o.writable=!0,o.emit("drain")};u.encodePayload(f,this.supportsBinary,function(r){o.doWrite(r,i)})},t.prototype.uri=function(){var f=this.query||{},o=this.secure?"https":"http",i="";this.timestampRequests!==!1&&(f[this.timestampParam]=y()),this.supportsBinary||f.sid||(f.b64=1),f=s.encode(f),this.port&&(o==="https"&&Number(this.port)!==443||o==="http"&&Number(this.port)!==80)&&(i=":"+this.port),f.length&&(f="?"+f);var r=this.hostname.indexOf(":")!==-1;return o+"://"+(r?"["+this.hostname+"]":this.hostname)+i+this.path+f}},function(d,h,n){function t(u){this.path=u.path,this.hostname=u.hostname,this.port=u.port,this.secure=u.secure,this.query=u.query,this.timestampParam=u.timestampParam,this.timestampRequests=u.timestampRequests,this.readyState="",this.agent=u.agent||!1,this.socket=u.socket,this.enablesXDR=u.enablesXDR,this.withCredentials=u.withCredentials,this.pfx=u.pfx,this.key=u.key,this.passphrase=u.passphrase,this.cert=u.cert,this.ca=u.ca,this.ciphers=u.ciphers,this.rejectUnauthorized=u.rejectUnauthorized,this.forceNode=u.forceNode,this.isReactNative=u.isReactNative,this.extraHeaders=u.extraHeaders,this.localAddress=u.localAddress}var a=n(19),s=n(5);d.exports=t,s(t.prototype),t.prototype.onError=function(u,p){var y=new Error(u);return y.type="TransportError",y.description=p,this.emit("error",y),this},t.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},t.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},t.prototype.send=function(u){if(this.readyState!=="open")throw new Error("Transport not open");this.write(u)},t.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},t.prototype.onData=function(u){var p=a.decodePacket(u,this.socket.binaryType);this.onPacket(p)},t.prototype.onPacket=function(u){this.emit("packet",u)},t.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(d,h,n){function t(v,x){var A="b"+h.packets[v.type]+v.data.data;return x(A)}function a(v,x,A){if(!x)return h.encodeBase64Packet(v,A);var _=v.data,C=new Uint8Array(_),R=new Uint8Array(1+_.byteLength);R[0]=b[v.type];for(var P=0;P<C.length;P++)R[P+1]=C[P];return A(R.buffer)}function s(v,x,A){if(!x)return h.encodeBase64Packet(v,A);var _=new FileReader;return _.onload=function(){h.encodePacket({type:v.type,data:_.result},x,!0,A)},_.readAsArrayBuffer(v.data)}function u(v,x,A){if(!x)return h.encodeBase64Packet(v,A);if(l)return s(v,x,A);var _=new Uint8Array(1);_[0]=b[v.type];var C=new E([_.buffer,v.data]);return A(C)}function p(v){try{v=e.decode(v,{strict:!1})}catch(x){return!1}return v}function y(v,x,A){for(var _=new Array(v.length),C=r(v.length,A),R=function(O,N,T){x(N,function(j,D){_[O]=D,T(j,_)})},P=0;P<v.length;P++)R(P,v[P],C)}var g,f=n(20),o=n(21),i=n(22),r=n(23),e=n(24);typeof ArrayBuffer!="undefined"&&(g=n(25));var c=typeof navigator!="undefined"&&/Android/i.test(navigator.userAgent),m=typeof navigator!="undefined"&&/PhantomJS/i.test(navigator.userAgent),l=c||m;h.protocol=3;var b=h.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},w=f(b),B={type:"error",data:"parser error"},E=n(26);h.encodePacket=function(v,x,A,_){typeof x=="function"&&(_=x,x=!1),typeof A=="function"&&(_=A,A=null);var C=v.data===void 0?void 0:v.data.buffer||v.data;if(typeof ArrayBuffer!="undefined"&&C instanceof ArrayBuffer)return a(v,x,_);if(typeof E!="undefined"&&C instanceof E)return u(v,x,_);if(C&&C.base64)return t(v,_);var R=b[v.type];return v.data!==void 0&&(R+=A?e.encode(String(v.data),{strict:!1}):String(v.data)),_(""+R)},h.encodeBase64Packet=function(v,x){var A="b"+h.packets[v.type];if(typeof E!="undefined"&&v.data instanceof E){var _=new FileReader;return _.onload=function(){var N=_.result.split(",")[1];x(A+N)},_.readAsDataURL(v.data)}var C;try{C=String.fromCharCode.apply(null,new Uint8Array(v.data))}catch(N){for(var R=new Uint8Array(v.data),P=new Array(R.length),O=0;O<R.length;O++)P[O]=R[O];C=String.fromCharCode.apply(null,P)}return A+=btoa(C),x(A)},h.decodePacket=function(v,x,A){if(v===void 0)return B;if(typeof v=="string"){if(v.charAt(0)==="b")return h.decodeBase64Packet(v.substr(1),x);if(A&&(v=p(v),v===!1))return B;var C=v.charAt(0);return Number(C)==C&&w[C]?v.length>1?{type:w[C],data:v.substring(1)}:{type:w[C]}:B}var _=new Uint8Array(v),C=_[0],R=i(v,1);return E&&x==="blob"&&(R=new E([R])),{type:w[C],data:R}},h.decodeBase64Packet=function(v,x){var A=w[v.charAt(0)];if(!g)return{type:A,data:{base64:!0,data:v.substr(1)}};var _=g.decode(v.substr(1));return x==="blob"&&E&&(_=new E([_])),{type:A,data:_}},h.encodePayload=function(v,x,A){function _(P){return P.length+":"+P}function C(P,O){h.encodePacket(P,!!R&&x,!1,function(N){O(null,_(N))})}typeof x=="function"&&(A=x,x=null);var R=o(v);return x&&R?E&&!l?h.encodePayloadAsBlob(v,A):h.encodePayloadAsArrayBuffer(v,A):v.length?void y(v,C,function(P,O){return A(O.join(""))}):A("0:")},h.decodePayload=function(v,x,A){if(typeof v!="string")return h.decodePayloadAsBinary(v,x,A);typeof x=="function"&&(A=x,x=null);var _;if(v==="")return A(B,0,1);for(var C,R,P="",O=0,N=v.length;O<N;O++){var T=v.charAt(O);if(T===":"){if(P===""||P!=(C=Number(P))||(R=v.substr(O+1,C),P!=R.length))return A(B,0,1);if(R.length){if(_=h.decodePacket(R,x,!1),B.type===_.type&&B.data===_.data)return A(B,0,1);var j=A(_,O+C,N);if(j===!1)return}O+=C,P=""}else P+=T}return P!==""?A(B,0,1):void 0},h.encodePayloadAsArrayBuffer=function(v,x){function A(_,C){h.encodePacket(_,!0,!0,function(R){return C(null,R)})}return v.length?void y(v,A,function(_,C){var R=C.reduce(function(N,T){var j;return j=typeof T=="string"?T.length:T.byteLength,N+j.toString().length+j+2},0),P=new Uint8Array(R),O=0;return C.forEach(function(N){var T=typeof N=="string",j=N;if(T){for(var D=new Uint8Array(N.length),q=0;q<N.length;q++)D[q]=N.charCodeAt(q);j=D.buffer}T?P[O++]=0:P[O++]=1;for(var U=j.byteLength.toString(),q=0;q<U.length;q++)P[O++]=parseInt(U[q]);P[O++]=255;for(var D=new Uint8Array(j),q=0;q<D.length;q++)P[O++]=D[q]}),x(P.buffer)}):x(new ArrayBuffer(0))},h.encodePayloadAsBlob=function(v,x){function A(_,C){h.encodePacket(_,!0,!0,function(R){var P=new Uint8Array(1);if(P[0]=1,typeof R=="string"){for(var O=new Uint8Array(R.length),N=0;N<R.length;N++)O[N]=R.charCodeAt(N);R=O.buffer,P[0]=0}for(var T=R instanceof ArrayBuffer?R.byteLength:R.size,j=T.toString(),D=new Uint8Array(j.length+1),N=0;N<j.length;N++)D[N]=parseInt(j[N]);if(D[j.length]=255,E){var q=new E([P.buffer,D.buffer,R]);C(null,q)}})}y(v,A,function(_,C){return x(new E(C))})},h.decodePayloadAsBinary=function(v,x,A){typeof x=="function"&&(A=x,x=null);for(var _=v,C=[];_.byteLength>0;){for(var R=new Uint8Array(_),P=R[0]===0,O="",N=1;R[N]!==255;N++){if(O.length>310)return A(B,0,1);O+=R[N]}_=i(_,2+O.length),O=parseInt(O);var T=i(_,0,O);if(P)try{T=String.fromCharCode.apply(null,new Uint8Array(T))}catch(q){var j=new Uint8Array(T);T="";for(var N=0;N<j.length;N++)T+=String.fromCharCode(j[N])}C.push(T),_=i(_,O)}var D=C.length;C.forEach(function(q,U){A(h.decodePacket(q,x,!0),U,D)})}},function(d,h){d.exports=Object.keys||function(n){var t=[],a=Object.prototype.hasOwnProperty;for(var s in n)a.call(n,s)&&t.push(s);return t}},function(d,h,n){function t(y){if(!y||typeof y!="object")return!1;if(a(y)){for(var g=0,f=y.length;g<f;g++)if(t(y[g]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(y)||typeof ArrayBuffer=="function"&&y instanceof ArrayBuffer||u&&y instanceof Blob||p&&y instanceof File)return!0;if(y.toJSON&&typeof y.toJSON=="function"&&arguments.length===1)return t(y.toJSON(),!0);for(var o in y)if(Object.prototype.hasOwnProperty.call(y,o)&&t(y[o]))return!0;return!1}var a=n(7),s=Object.prototype.toString,u=typeof Blob=="function"||typeof Blob!="undefined"&&s.call(Blob)==="[object BlobConstructor]",p=typeof File=="function"||typeof File!="undefined"&&s.call(File)==="[object FileConstructor]";d.exports=t},function(d,h){d.exports=function(n,t,a){var s=n.byteLength;if(t=t||0,a=a||s,n.slice)return n.slice(t,a);if(t<0&&(t+=s),a<0&&(a+=s),a>s&&(a=s),t>=s||t>=a||s===0)return new ArrayBuffer(0);for(var u=new Uint8Array(n),p=new Uint8Array(a-t),y=t,g=0;y<a;y++,g++)p[g]=u[y];return p.buffer}},function(d,h){function n(a,s,u){function p(g,f){if(p.count<=0)throw new Error("after called too many times");--p.count,g?(y=!0,s(g),s=u):p.count!==0||y||s(null,f)}var y=!1;return u=u||t,p.count=a,a===0?s():p}function t(){}d.exports=n},function(d,h){function n(c){for(var m,l,b=[],w=0,B=c.length;w<B;)m=c.charCodeAt(w++),m>=55296&&m<=56319&&w<B?(l=c.charCodeAt(w++),(64512&l)==56320?b.push(((1023&m)<<10)+(1023&l)+65536):(b.push(m),w--)):b.push(m);return b}function t(c){for(var m,l=c.length,b=-1,w="";++b<l;)m=c[b],m>65535&&(m-=65536,w+=e(m>>>10&1023|55296),m=56320|1023&m),w+=e(m);return w}function a(c,m){if(c>=55296&&c<=57343){if(m)throw Error("Lone surrogate U+"+c.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function s(c,m){return e(c>>m&63|128)}function u(c,m){if(!(4294967168&c))return e(c);var l="";return 4294965248&c?4294901760&c?!(4292870144&c)&&(l=e(c>>18&7|240),l+=s(c,12),l+=s(c,6)):(a(c,m)||(c=65533),l=e(c>>12&15|224),l+=s(c,6)):l=e(c>>6&31|192),l+=e(63&c|128)}function p(c,m){m=m||{};for(var l,b=m.strict!==!1,w=n(c),B=w.length,E=-1,v="";++E<B;)l=w[E],v+=u(l,b);return v}function y(){if(r>=i)throw Error("Invalid byte index");var c=255&o[r];if(r++,(192&c)==128)return 63&c;throw Error("Invalid continuation byte")}function g(c){var m,l,b,w,B;if(r>i)throw Error("Invalid byte index");if(r==i)return!1;if(m=255&o[r],r++,(128&m)==0)return m;if((224&m)==192){if(l=y(),B=(31&m)<<6|l,B>=128)return B;throw Error("Invalid continuation byte")}if((240&m)==224){if(l=y(),b=y(),B=(15&m)<<12|l<<6|b,B>=2048)return a(B,c)?B:65533;throw Error("Invalid continuation byte")}if((248&m)==240&&(l=y(),b=y(),w=y(),B=(7&m)<<18|l<<12|b<<6|w,B>=65536&&B<=1114111))return B;throw Error("Invalid UTF-8 detected")}function f(c,m){m=m||{};var l=m.strict!==!1;o=n(c),i=o.length,r=0;for(var b,w=[];(b=g(l))!==!1;)w.push(b);return t(w)}/*! https://mths.be/utf8js v2.1.2 by @mathias */var o,i,r,e=String.fromCharCode;d.exports={version:"2.1.2",encode:p,decode:f}},function(d,h){(function(n){h.encode=function(t){var a,s=new Uint8Array(t),u=s.length,p="";for(a=0;a<u;a+=3)p+=n[s[a]>>2],p+=n[(3&s[a])<<4|s[a+1]>>4],p+=n[(15&s[a+1])<<2|s[a+2]>>6],p+=n[63&s[a+2]];return u%3===2?p=p.substring(0,p.length-1)+"=":u%3===1&&(p=p.substring(0,p.length-2)+"=="),p},h.decode=function(t){var a,s,u,p,y,g=.75*t.length,f=t.length,o=0;t[t.length-1]==="="&&(g--,t[t.length-2]==="="&&g--);var i=new ArrayBuffer(g),r=new Uint8Array(i);for(a=0;a<f;a+=4)s=n.indexOf(t[a]),u=n.indexOf(t[a+1]),p=n.indexOf(t[a+2]),y=n.indexOf(t[a+3]),r[o++]=s<<2|u>>4,r[o++]=(15&u)<<4|p>>2,r[o++]=(3&p)<<6|63&y;return i}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(d,h){function n(g){return g.map(function(f){if(f.buffer instanceof ArrayBuffer){var o=f.buffer;if(f.byteLength!==o.byteLength){var i=new Uint8Array(f.byteLength);i.set(new Uint8Array(o,f.byteOffset,f.byteLength)),o=i.buffer}return o}return f})}function t(g,f){f=f||{};var o=new s;return n(g).forEach(function(i){o.append(i)}),f.type?o.getBlob(f.type):o.getBlob()}function a(g,f){return new Blob(n(g),f||{})}var s=typeof s!="undefined"?s:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"&&MozBlobBuilder,u=function(){try{var g=new Blob(["hi"]);return g.size===2}catch(f){return!1}}(),p=u&&function(){try{var g=new Blob([new Uint8Array([1,2])]);return g.size===2}catch(f){return!1}}(),y=s&&s.prototype.append&&s.prototype.getBlob;typeof Blob!="undefined"&&(t.prototype=Blob.prototype,a.prototype=Blob.prototype),d.exports=function(){return u?p?Blob:a:y?t:void 0}()},function(d,h){h.encode=function(n){var t="";for(var a in n)n.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(n[a]));return t},h.decode=function(n){for(var t={},a=n.split("&"),s=0,u=a.length;s<u;s++){var p=a[s].split("=");t[decodeURIComponent(p[0])]=decodeURIComponent(p[1])}return t}},function(d,h){d.exports=function(n,t){var a=function(){};a.prototype=t.prototype,n.prototype=new a,n.prototype.constructor=n}},function(d,h){function n(o){var i="";do i=u[o%p]+i,o=Math.floor(o/p);while(o>0);return i}function t(o){var i=0;for(f=0;f<o.length;f++)i=i*p+y[o.charAt(f)];return i}function a(){var o=n(+new Date);return o!==s?(g=0,s=o):o+"."+n(g++)}for(var s,u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),p=64,y={},g=0,f=0;f<p;f++)y[u[f]]=f;a.encode=n,a.decode=t,d.exports=a},function(d,h,n){function t(){}function a(o){s.call(this,o),this.query=this.query||{},y||(y=p.___eio=p.___eio||[]),this.index=y.length;var i=this;y.push(function(r){i.onData(r)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){i.script&&(i.script.onerror=t)},!1)}var s=n(17),u=n(28),p=n(15);d.exports=a;var y,g=/\n/g,f=/\\n/g;u(a,s),a.prototype.supportsBinary=!1,a.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},a.prototype.doPoll=function(){var o=this,i=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),i.async=!0,i.src=this.uri(),i.onerror=function(c){o.onError("jsonp poll error",c)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(i,r):(document.head||document.body).appendChild(i),this.script=i;var e=typeof navigator!="undefined"&&/gecko/i.test(navigator.userAgent);e&&setTimeout(function(){var c=document.createElement("iframe");document.body.appendChild(c),document.body.removeChild(c)},100)},a.prototype.doWrite=function(o,i){function r(){e(),i()}function e(){if(c.iframe)try{c.form.removeChild(c.iframe)}catch(E){c.onError("jsonp polling iframe removal error",E)}try{var B='<iframe src="javascript:0" name="'+c.iframeId+'">';m=document.createElement(B)}catch(E){m=document.createElement("iframe"),m.name=c.iframeId,m.src="javascript:0"}m.id=c.iframeId,c.form.appendChild(m),c.iframe=m}var c=this;if(!this.form){var m,l=document.createElement("form"),b=document.createElement("textarea"),w=this.iframeId="eio_iframe_"+this.index;l.className="socketio",l.style.position="absolute",l.style.top="-1000px",l.style.left="-1000px",l.target=w,l.method="POST",l.setAttribute("accept-charset","utf-8"),b.name="d",l.appendChild(b),document.body.appendChild(l),this.form=l,this.area=b}this.form.action=this.uri(),e(),o=o.replace(f,`\\
`),this.area.value=o.replace(g,"\\n");try{this.form.submit()}catch(B){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){c.iframe.readyState==="complete"&&r()}:this.iframe.onload=r}},function(d,h,n){function t(i){var r=i&&i.forceBase64;r&&(this.supportsBinary=!1),this.perMessageDeflate=i.perMessageDeflate,this.usingBrowserWebSocket=a&&!i.forceNode,this.protocols=i.protocols,this.usingBrowserWebSocket||(o=s),u.call(this,i)}var a,s,u=n(18),p=n(19),y=n(27),g=n(28),f=n(29);if(n(3)("engine.io-client:websocket"),typeof WebSocket!="undefined"?a=WebSocket:typeof self!="undefined"&&(a=self.WebSocket||self.MozWebSocket),typeof window=="undefined")try{s=n(32)}catch(i){}var o=a||s;d.exports=t,g(t,u),t.prototype.name="websocket",t.prototype.supportsBinary=!0,t.prototype.doOpen=function(){if(this.check()){var i=this.uri(),r=this.protocols,e={};this.isReactNative||(e.agent=this.agent,e.perMessageDeflate=this.perMessageDeflate,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?r?new o(i,r):new o(i):new o(i,r,e)}catch(c){return this.emit("error",c)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},t.prototype.addEventListeners=function(){var i=this;this.ws.onopen=function(){i.onOpen()},this.ws.onclose=function(){i.onClose()},this.ws.onmessage=function(r){i.onData(r.data)},this.ws.onerror=function(r){i.onError("websocket error",r)}},t.prototype.write=function(i){function r(){e.emit("flush"),setTimeout(function(){e.writable=!0,e.emit("drain")},0)}var e=this;this.writable=!1;for(var c=i.length,m=0,l=c;m<l;m++)(function(b){p.encodePacket(b,e.supportsBinary,function(w){if(!e.usingBrowserWebSocket){var B={};if(b.options&&(B.compress=b.options.compress),e.perMessageDeflate){var E=typeof w=="string"?Buffer.byteLength(w):w.length;E<e.perMessageDeflate.threshold&&(B.compress=!1)}}try{e.usingBrowserWebSocket?e.ws.send(w):e.ws.send(w,B)}catch(v){}--c||r()})})(i[m])},t.prototype.onClose=function(){u.prototype.onClose.call(this)},t.prototype.doClose=function(){typeof this.ws!="undefined"&&this.ws.close()},t.prototype.uri=function(){var i=this.query||{},r=this.secure?"wss":"ws",e="";this.port&&(r==="wss"&&Number(this.port)!==443||r==="ws"&&Number(this.port)!==80)&&(e=":"+this.port),this.timestampRequests&&(i[this.timestampParam]=f()),this.supportsBinary||(i.b64=1),i=y.encode(i),i.length&&(i="?"+i);var c=this.hostname.indexOf(":")!==-1;return r+"://"+(c?"["+this.hostname+"]":this.hostname)+e+this.path+i},t.prototype.check=function(){return!(!o||"__initialize"in o&&this.name===t.prototype.name)}},function(d,h){},function(d,h){var n=[].indexOf;d.exports=function(t,a){if(n)return t.indexOf(a);for(var s=0;s<t.length;++s)if(t[s]===a)return s;return-1}},function(d,h,n){function t(e,c,m){this.io=e,this.nsp=c,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},m&&m.query&&(this.query=m.query),this.io.autoConnect&&this.open()}var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(4),u=n(5),p=n(35),y=n(36),g=n(37),f=(n(3)("socket.io-client:socket"),n(27)),o=n(21);d.exports=t;var i={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},r=u.prototype.emit;u(t.prototype),t.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[y(e,"open",g(this,"onopen")),y(e,"packet",g(this,"onpacket")),y(e,"close",g(this,"onclose"))]}},t.prototype.open=t.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.reconnecting||this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},t.prototype.send=function(){var e=p(arguments);return e.unshift("message"),this.emit.apply(this,e),this},t.prototype.emit=function(e){if(i.hasOwnProperty(e))return r.apply(this,arguments),this;var c=p(arguments),m={type:(this.flags.binary!==void 0?this.flags.binary:o(c))?s.BINARY_EVENT:s.EVENT,data:c};return m.options={},m.options.compress=!this.flags||this.flags.compress!==!1,typeof c[c.length-1]=="function"&&(this.acks[this.ids]=c.pop(),m.id=this.ids++),this.connected?this.packet(m):this.sendBuffer.push(m),this.flags={},this},t.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},t.prototype.onopen=function(){if(this.nsp!=="/")if(this.query){var e=a(this.query)==="object"?f.encode(this.query):this.query;this.packet({type:s.CONNECT,query:e})}else this.packet({type:s.CONNECT})},t.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},t.prototype.onpacket=function(e){var c=e.nsp===this.nsp,m=e.type===s.ERROR&&e.nsp==="/";if(c||m)switch(e.type){case s.CONNECT:this.onconnect();break;case s.EVENT:this.onevent(e);break;case s.BINARY_EVENT:this.onevent(e);break;case s.ACK:this.onack(e);break;case s.BINARY_ACK:this.onack(e);break;case s.DISCONNECT:this.ondisconnect();break;case s.ERROR:this.emit("error",e.data)}},t.prototype.onevent=function(e){var c=e.data||[];e.id!=null&&c.push(this.ack(e.id)),this.connected?r.apply(this,c):this.receiveBuffer.push(c)},t.prototype.ack=function(e){var c=this,m=!1;return function(){if(!m){m=!0;var l=p(arguments);c.packet({type:o(l)?s.BINARY_ACK:s.ACK,id:e,data:l})}}},t.prototype.onack=function(e){var c=this.acks[e.id];typeof c=="function"&&(c.apply(this,e.data),delete this.acks[e.id])},t.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},t.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)r.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},t.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},t.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},t.prototype.close=t.prototype.disconnect=function(){return this.connected&&this.packet({type:s.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},t.prototype.compress=function(e){return this.flags.compress=e,this},t.prototype.binary=function(e){return this.flags.binary=e,this}},function(d,h){function n(t,a){var s=[];a=a||0;for(var u=a||0;u<t.length;u++)s[u-a]=t[u];return s}d.exports=n},function(d,h){function n(t,a,s){return t.on(a,s),{destroy:function(){t.removeListener(a,s)}}}d.exports=n},function(d,h){var n=[].slice;d.exports=function(t,a){if(typeof a=="string"&&(a=t[a]),typeof a!="function")throw new Error("bind() requires a function");var s=n.call(arguments,2);return function(){return a.apply(t,s.concat(n.call(arguments)))}}},function(d,h){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}d.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var a=Math.random(),s=Math.floor(a*this.jitter*t);t=1&Math.floor(10*a)?t+s:t-s}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])})})(Q);var Et=Q.exports;const Ct=ft(Et);let Rt=window.location.hostname,Z=window.location.port?":9000":"",Pt=Z?"http":"https",Nt=`${Pt}://${Rt}${Z}`,Ot=Ct(Nt);class Tt{constructor(){this.isLoggedIn=!1,this.user=null,this.user_image=null,this.cookie=null,this.cookie=Object.fromEntries(document.cookie.split("; ").map(k=>k.split("=")).map(k=>[k[0],decodeURIComponent(k[1])])),this.isLoggedIn=this.cookie.user_id&&this.cookie.user_id!=="Guest"}login(k,d){return L(this,null,function*(){let h=yield $("login",{usr:k,pwd:d});return h?(this.isLoggedIn=!0,h):!1})}logout(){return L(this,null,function*(){yield $("logout"),this.isLoggedIn=!1,window.location.reload()})}resetPassword(k){return L(this,null,function*(){console.log("resetting password")})}}const I=lt(mt),W=M(new Tt);I.use(H);I.use(St);I.provide("$auth",W);I.provide("$call",$);I.provide("$socket",Ot);H.beforeEach((S,k,d)=>L(tt,null,function*(){S.matched.some(h=>!h.meta.isLoginPage)?W.isLoggedIn?d():d({name:"Login",query:{route:S.path}}):W.isLoggedIn?d({name:"Home"}):d()}));I.mount("#app")});export default jt();
//# sourceMappingURL=index-ERiUHLYI.js.map

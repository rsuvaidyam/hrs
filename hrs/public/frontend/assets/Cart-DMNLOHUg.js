var R=(e,n,l)=>new Promise((p,i)=>{var m=c=>{try{r(l.next(c))}catch(o){i(o)}},a=c=>{try{r(l.throw(c))}catch(o){i(o)}},r=c=>c.done?p(c.value):Promise.resolve(c.value).then(m,a);r((l=l.apply(e,n)).next())});import{n as M,z as x,R as W,_ as v,c as h,o as d,d as _,e as t,f as y,g as w,t as u,F as N,m as T,p as $,h as C,i as f,S as z,r as b,k as Q,v as O,l as q,E as U}from"./frappe-ui-DTa8EDDi.js";const Y=M({name:"CartItem",props:{product:{type:Object,required:!0},isSelected:{type:Boolean,required:!0}},emits:["delete","quantityChange","select"],setup(e,{emit:n}){const l=x(()=>e.product.count),p=()=>n("delete",e.product.name),i=()=>n("quantityChange",e.product.name,l.value),m=()=>n("select",e.product.name),a=x(()=>e.product.product.price*e.product.count),r=x(()=>e.product.product.discounts?Math.ceil(e.product.product.final_price)*e.product.count:a.value);return{count:l,handleDelete:p,handleQuantityChange:i,handleSelect:m,originalPrice:a,formattedPrice:r}},components:{Select:W}}),S=e=>($("data-v-4b71b7ff"),e=e(),C(),e),G={class:"lg:h-36 p-3 text-gray-800 relative border-b flex flex-col lg:flex-row justify-between"},H=["checked"],J=["src","alt"],K={class:"flex flex-col gap-1 justify-between"},X={class:"flex flex-col gap-2"},Z={class:"text-sm md:text-lg truncate group-hover:underline"},ee={class:"truncate text-sm"},te=S(()=>t("span",{class:"text-gray-500"},"Flavour : ",-1)),se={class:"bg-gray-100 rounded-md p-1 text-gray-700 font-medium text-xs"},oe={class:"flex items-center gap-2"},ne=S(()=>t("div",{class:"bg-primary rounded-sm w-14 px-2.5 text-sm text-white flex items-center gap-1"}," 4.3 ",-1)),ce={class:"flex items-center text-lg text-primary"},le={class:"flex items-center text-sm text-gray-700"},ae={class:"text-green-500 text-sm font-medium"},re={class:"flex flex-row-reverse lg:flex-col items-center justify-between"},de={class:"flex gap-2 items-center"},ie={class:"flex bg-gray-100 text-sm px-1.5 rounded-sm"},ue=S(()=>t("button",{class:"cursor-text text-sm"},"Qty :",-1));function pe(e,n,l,p,i,m){var c,o;const a=h("router-link"),r=h("Select");return d(),_("div",G,[t("input",{type:"checkbox",class:"absolute top-4 right-4",checked:e.isSelected,onChange:n[0]||(n[0]=(...s)=>e.handleSelect&&e.handleSelect(...s))},null,40,H),y(a,{to:`/productdetails/${(o=(c=e.product)==null?void 0:c.product)==null?void 0:o.name}`,class:"flex gap-2 lg:gap-4 group"},{default:w(()=>{var s,g,k,I,P,j,D,A,B,V,E;return[t("img",{class:"h-20 w-20 lg:h-full rounded-md",src:(k=(g=(s=e.product)==null?void 0:s.product)==null?void 0:g.images[0])==null?void 0:k.image,alt:(P=(I=e.product)==null?void 0:I.product)==null?void 0:P.name1},null,8,J),t("div",K,[t("div",X,[t("p",Z,u((D=(j=e.product)==null?void 0:j.product)==null?void 0:D.name1),1),t("p",ee,[te,t("span",se,u((B=(A=e.product)==null?void 0:A.product)==null?void 0:B.category),1)])]),t("div",oe,[ne,t("span",ce,u(e.formattedPrice),1),e.product.product.discounts?(d(),_(N,{key:0},[t("del",le,u(e.originalPrice),1),t("span",ae,u((E=(V=e.product)==null?void 0:V.product)==null?void 0:E.discounts)+"% off",1)],64)):T("",!0)])])]}),_:1},8,["to"]),t("div",re,[t("div",de,[t("div",ie,[ue,y(r,{class:"pr-7",modelValue:e.count,"onUpdate:modelValue":n[1]||(n[1]=s=>e.count=s),options:[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],onChange:e.handleQuantityChange},null,8,["modelValue","onChange"])])])])])}const me=v(Y,[["render",pe],["__scopeId","data-v-4b71b7ff"]]),fe={name:"CartAlert"},F=e=>($("data-v-fdc16e6e"),e=e(),C(),e),he={class:"pt-8 pb-2 w-full h-1/2 px-0 md:px-10 flex justify-center"},_e={class:"w-full md:w-4/5 border-0 md:border md:bg-gray-50 md:shadow-md h-full flex flex-col gap-3 items-center justify-center"},ge=F(()=>t("p",{class:"font-medium"},"Your cart is empty!",-1)),xe=F(()=>t("p",{class:"text-xs"},"Add items to it now.",-1));function ye(e,n,l,p,i,m){const a=h("router-link");return d(),_("div",he,[t("div",_e,[ge,xe,y(a,{to:"/",class:"px-10 py-1.5 bg-primary border bg-white rounded-md"},{default:w(()=>[f("Shop now")]),_:1})])])}const be=v(fe,[["render",ye],["__scopeId","data-v-fdc16e6e"]]),ve=M({name:"Cart",components:{CartItem:me,Spinner:z,CartAlert:be},setup(){const e=b([]),n=b(!0),l=b([]),p=Q("$call"),i=Q("$session"),m=()=>R(this,null,function*(){try{const o=yield p("hrs.controllers.cart.get_cart",{usr:i.user});e.value=o,l.value=o.map(s=>s.name),n.value=!1}catch(o){console.error(o)}}),a=x(()=>e.value.reduce((o,s)=>o+(s.product.discounts?Math.ceil((100-s.product.discounts)/100*s.product.price)*s.count:s.product.price*s.count),0)),r=x(()=>e.value.reduce((o,s)=>o+(s.product.discounts?s.product.price*s.count-Math.ceil((100-s.product.discounts)/100*s.product.price)*s.count:0),0)),c=x(()=>a.value-r.value);return O(m),{products:e,loading:n,selectedProductIds:l,totalPrice:a,totalDiscounts:r,totalPriceWithDiscount:c}}}),L=e=>($("data-v-adbd6fa0"),e=e(),C(),e),we={class:"h-full"},$e={key:0,class:"w-full h-full flex items-center justify-center"},Ce={key:2,class:"pb-16 w-full h-full px-0 lg:px-8 bg-gray-100 relative"},Se={class:"flex flex-col md:flex-row gap-3 h-full pt-1 md:pt-3 overflow-y-auto md:overscroll-y-none scrollbar-thin"},ke={class:"w-full md:w-[70%] md:overflow-y-auto shadow-md md:shadow-none md:scrollbar-thin md:border h-auto md:h-full flex flex-col bg-white"},Ie={class:"w-full md:w-[30%]"},Pe={class:"md:border bg-white h-auto shadow-md md:shadow-none"},je=L(()=>t("p",{class:"text-lg text-gray-600 h-12 border-b flex items-center px-4"},"PRICE DETAILS",-1)),De={class:"flex flex-col gap-5 p-4 border-b"},Ae={class:"flex justify-between items-center"},Be={class:"flex items-center"},Ve={class:"flex justify-between items-center"},Ee={class:"flex items-center text-primary"},Re=L(()=>t("p",{class:"flex justify-between items-center"},[f("Delivery Charge "),t("del",{class:"flex items-center text-gray-500"}," 40")],-1)),Qe={class:"flex justify-between px-4 py-2 font-medium"},qe={class:"flex items-center"},Me={key:0,class:"fixed w-full left-0 bg-white h-16 z-50 bottom-0 px-2 md:px-16 flex justify-between items-center"},Ne={class:"text-xl text-gray-700 flex items-center"},Te={class:"text-lg flex items-center"};function Fe(e,n,l,p,i,m){const a=h("Spinner"),r=h("CartAlert"),c=h("CartItem"),o=h("BiRupee"),s=h("router-link");return d(),_("div",we,[e.loading?(d(),_("div",$e,[y(a,{class:"w-40 absolute top-1.5 right-1.5"})])):e.products.length?(d(),_("div",Ce,[t("div",Se,[t("div",ke,[(d(!0),_(N,null,U(e.products,g=>(d(),q(c,{key:g.name,product:g,isSelected:e.selectedProductIds.includes(g.name),onDelete:e.deleteItem,onQuantityChange:e.updateCartItemCount,onSelect:e.toggleProductSelection},null,8,["product","isSelected","onDelete","onQuantityChange","onSelect"]))),128))]),t("div",Ie,[t("div",Pe,[je,t("div",De,[t("p",Ae,[f("Price "),t("span",Be,u(e.totalPrice),1)]),t("p",Ve,[f("Discounts "),t("span",Ee,"- "+u(e.totalDiscounts),1)]),Re]),t("p",Qe,[f("Total Price "),t("span",qe,u(e.totalPriceWithDiscount),1)])])])]),e.selectedProductIds.length?(d(),_("div",Me,[t("p",Ne,[f("Total Price : "),t("span",Te,[y(o),f(" "+u(e.totalPriceWithDiscount),1)])]),y(s,{to:"/buy",class:"text-white bg-primary py-2 px-10"},{default:w(()=>[f("PLACE ORDER")]),_:1})])):T("",!0)])):(d(),q(r,{key:1}))])}const ze=v(ve,[["render",Fe],["__scopeId","data-v-adbd6fa0"]]);export{ze as default};
//# sourceMappingURL=Cart-DMNLOHUg.js.map
